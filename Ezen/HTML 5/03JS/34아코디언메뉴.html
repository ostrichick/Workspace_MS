<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>아코디언메뉴</title>
    <link rel="stylesheet" href="" />
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      li {
        list-style: none;
      }
      #menu {
        margin: 50px;
        width: 300px;
      }
      #menu .btn {
        display: block;
        font-size: 16px;
        color: #ddd;
        text-decoration: none;
        text-transform: uppercase;
        background: #333;
        line-height: 1;
        padding: 20px;
        border: 1px solid black;
        border-top-color: #5c5c5c;
        position: relative;
      }
      #menu .btn::before,
      #menu .btn::after {
        content: "";
        position: absolute;
        width: 12px;
        height: 3px;
        right: 20px;
        top: 50%;
        margin-top: -1.5px;
        background: white;
        transition: all 0.5s linear;
      }
      #menu .btn::after {
        transform: rotate(90deg);
        transition-duration: 0.25s;
      }
      #menu .active .btn::before,
      #menu .active .btn::after {
        transform: rotate(180deg);
      }
      #menu .sub {
        overflow: hidden;
        transition: all 0.5s;
      }
      #menu .sub a {
        display: block;
        font-size: 15px;
        padding: 14px 30px;
        color: #777;
        text-decoration: none;
        /* text-transform: uppercase; */
        background: #f1f1f1;
        /* line-height: 1; */
        /* padding: 20px; */
        border: 1px solid #ddd;
        border-top-color: 0;
        /* position: relative; */
      }
    </style>
  </head>
  <body>
    <div id="menu">
      <!-- div#meny>ul>li*3>a.htm[href="#"]{menu $$} -->
      <ul>
        <li>
          <a href="#" class="btn">menu 01</a>
          <div class="sub">
            <ul>
              <li><a href="#">sub menu 1-1</a></li>
              <li><a href="#">sub menu 1-2</a></li>
              <li><a href="#">sub menu 1-3</a></li>
            </ul>
          </div>
        </li>
        <li>
          <a href="#" class="btn">menu 02</a>
          <div class="sub">
            <ul>
              <li><a href="#">sub menu 2-1</a></li>
              <li><a href="#">sub menu 2-2</a></li>
              <li><a href="#">sub menu 2-3</a></li>
              <li><a href="#">sub menu 2-4</a></li>
            </ul>
          </div>
        </li>
        <li>
          <a href="#" class="btn">menu 02</a>
          <div class="sub">
            <ul>
              <li><a href="#">sub menu 3-1</a></li>
              <li><a href="#">sub menu 3-2</a></li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
    <script>
      let btns = document.getElementsByClassName("btn"); // 배열
      let subs = document.getElementsByClassName("sub");

      let heights = [];

      for (var z = 0; z < subs.length; z++) {
        heights[z] = subs[z].offsetHeight; // 각 sub의 높이를 배열에 집어넣음
        // subs[z].style.display = "none"; //sub을 진열하지 않음
        subs[z].style.height = 0;
      }

      //초기화

      for (var i = 0; i < btns.length; i++) {
        let n = i; // 블록 변수

        // heights[i] = subs[i].children[0].outerHeight;

        btns[i].addEventListener("click", function (e) {
          e.preventDefault();
          slideUp(n);
          //   let btn = e.currentTarget;
          //   this.nextElementSibling.style.display = "block"; //a.btn의 nextsibling은 div.sub임
          this.nextElementSibling.style.height = heights[n] + "px";
          this.parentElement.classList.add("active");
        });
      }
      function slideUp(x) {
        for (var j = 0; j < btns.length; j++) {
          if (j == x) continue;
          //   btns[j].nextElementSibling.style = "none";
          subs[j].style.height = 0;
          subs[j].parentElement.classList.remove("active");
        }
      }
    </script>
  </body>
</html>
